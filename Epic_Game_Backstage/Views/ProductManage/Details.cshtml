@model Epic_Game_Backstage.ViewModels.ProductDetailsViewModel

<div class="container-fluid">
    <div class="row">
        <div class="col-12 col-md-4">
            <h3>ProductDetails</h3>
            <div style="width: 135px">
                <div style="padding-bottom: calc(4/3 * 100%); position: relative">
                    <div class="imgArea" style="background-image: url('@Html.DisplayFor(model => model._detailtext.Img_Url)');position: absolute; top: 0; height: 100%; width: 100%; background-size: auto 100%; background-repeat: no-repeat; background-position: bottom;"></div>
                </div>
            </div>
            <hr />
            <dl class="dl-horizontal">

                <dt>
                    @Html.DisplayNameFor(model => model._detailtext.ProductId)
                </dt>

                <dd>
                    @Html.DisplayFor(model => model._detailtext.ProductId)
                </dd>

                <dt>
                    @Html.DisplayNameFor(model => model._detailtext.ProductName)
                </dt>

                <dd>
                    @Html.DisplayFor(model => model._detailtext.ProductName)
                </dd>

                <dt>
                    @Html.DisplayNameFor(model => model._detailtext.Developer)
                </dt>

                <dd>
                    @Html.DisplayFor(model => model._detailtext.Developer)
                </dd>

                <dt>
                    @Html.DisplayNameFor(model => model._detailtext.Publisher)
                </dt>

                <dd>
                    @Html.DisplayFor(model => model._detailtext.Publisher)
                </dd>

                <dt>
                    @Html.DisplayNameFor(model => model._detailtext.ReleaseDate)
                </dt>

                <dd>
                    @Html.DisplayFor(model => model._detailtext.ReleaseDate)
                </dd>

                <dt>
                    @Html.DisplayNameFor(model => model._detailtext.sales_volume)
                </dt>

                <dd>
                    @Html.DisplayFor(model => model._detailtext.sales_volume)
                </dd>

                <dt>
                    @Html.DisplayNameFor(model => model._detailtext.total_income)
                </dt>

                <dd>
                    NTD : @Html.DisplayFor(model => model._detailtext.total_income)
                </dd>

            </dl>
            <p>
                @Html.ActionLink("Edit", "Edit", new { id = Model._detailtext.ProductId }) |
                @Html.ActionLink("Back to List", "Index")
            </p>
        </div>
        <div class="col-12 col-md-8">
            <canvas id="sales_chart" width="400" height="400"></canvas>
        </div>
    </div>
</div>

@section endJS{
    <script>

        let month = new Array(12);
        month[0] = "January";
        month[1] = "February";
        month[2] = "March";
        month[3] = "April";
        month[4] = "May";
        month[5] = "June";
        month[6] = "July";
        month[7] = "August";
        month[8] = "September";
        month[9] = "October";
        month[10] = "November";
        month[11] = "December";

        let d = new Date();

        var ctx = document.getElementById("sales_chart");
        var chart = new Chart(ctx, {
            type: "line",
            data: {
                labels: @Html.Raw(Json.Encode(Model._chart_toarray.DaysOfMonth)),
                datasets: [{
                    label:"@Html.DisplayFor(model => model._detailtext.ProductName)",
                    data: @Html.Raw(Json.Encode(Model._chart_toarray.CountOfDay)),
                    fill: false,
                    backgroundColor: 'rgba(255,165,0,0.3)',
                    borderColor: 'rgb(255,165,0)',
                    pointStyle: "circle",
                    pointBackgroundColor: 'rgb(0,255,0)',
                    pointRadius: 5,
                    pointHoverRadius: 10
                }]
            },
            options: {
                responsive: true,
                title: {
                    display: true,
                    fontSize: 26,
                    text: `Total Sales In ${month[d.getMonth()]}`
                },
                tooltips: {
                    mode: 'point',
                    intersect: true
                },
                legend: {
                    position: 'bottom',
                    labels: {
                        fontColor: 'black'
                    }
                }
            }
        });
    </script>
}